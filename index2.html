<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ECRC</title>

    <meta name="keywords" content="ECRC,ECR Company,Easy car rental company,Easy car rental company srilanka,car rent in sri lanka,srilankan car rental,ecrc.lk ">
    <meta name="description" content="Compare The Biggest Car Rental Brands & Book Online in a Few Simple Steps. We Speak Your Language. Unbeatable Prices. The Best Car Rental Deals in One Search! Easy Booking.">
    <meta name="viewport" content="width=device-width initial-scale=1">

    <link rel="icon" href="assets/img/logo.png">
    <link rel="stylesheet" href="assets/css%20normalize/normalize.css">

    <link rel="stylesheet" href="assets/fonts/css/all.min.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@100&family=Montserrat:wght@100&family=Open+Sans:wght@800&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@100&family=Montserrat:wght@100&family=Open+Sans:wght@800&family=Roboto&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@100&family=Montserrat:wght@100;800&family=Open+Sans:wght@800&family=Roboto&display=swap" rel="stylesheet">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@100&family=Montserrat:wght@100;800&family=Roboto&display=swap" rel="stylesheet">

    <script src="https://kit.fontawesome.com/35bc792765.js" crossorigin="anonymous"></script>

    <!--<link href="assets/bootstrap/css/bootstrap.min.css" rel="stylesheet">-->

    <link rel="stylesheet" href="assets/styles/style2.css">

</head>

<style>

</style>

<body>

    <!--main container-->
    <section id="main_container">
        <!--hello admin-->
        <label id="lblHelloAdmin">Hello admin,</label>
        <label id="lblDescription">Payments updates</label>

        <!--search bar-->
        <input id="inputSearch" type="search" placeholder="Search">

        <i id="iHome" class="fa-solid fa-house-user"></i>
        <i id="iDriver" class="fa-solid fa-screwdriver-wrench"></i>
        <i id="iCar" class="fa-solid fa-car"></i>
        <i id="iUser" class="fa-solid fa-user"></i>
        <i id="iAdmin" class="fa-solid fa-unlock-keyhole"></i>
        <i id="iSettings" class="fa-solid fa-book"></i>

        <!--income details-->
        <div id="incomeDetails_container">
            <div id="dailyIncomeBox">
                <i id="iDaily" class="fa-regular fa-clock"></i>
                <label id="lblDaily">Daily incomes</label>
                <label id="lblDailyDescription">Details of Today</label>
                <label id="lblDailyIncome">LKR 8040.00</label>
            </div>

            <div id="weeklyIncomeBox">
                <i id="iWeekly" class="fa-regular fa-calendar-plus"></i>
                <label id="lblWeekly">Weekly incomes</label>
                <label id="lblWeeklyDescription">Details of last week</label>
                <label id="lblWeeklyIncome">LKR 28460.00</label>
            </div>

            <div id="monthlyIncomeBox">
                <i id="iMonthly" class="fa-regular fa-calendar-minus"></i>
                <label id="lblMonthly">Monthly incomes</label>
                <label id="lblMonthlyDescription">Details of last month</label>
                <label id="lblMonthlyIncome">LKR 328460.00</label>
            </div>

            <div id="annuallyIncomeBox">
                <i id="iAnnually" class="fa-regular fa-calendar-check"></i>
                <label id="lblAnnually">Annually incomes</label>
                <label id="lblAnnuallyDescription">Details of last year</label>
                <label id="lblAnnuallyIncome">LKR 3941520.00</label>
            </div>

            <div id="customIncomeBox">
                <svg id="svgCustom" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Pro 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --><path d="M0 416C0 398.3 14.33 384 32 384H86.66C99 355.7 127.2 336 160 336C192.8 336 220.1 355.7 233.3 384H480C497.7 384 512 398.3 512 416C512 433.7 497.7 448 480 448H233.3C220.1 476.3 192.8 496 160 496C127.2 496 99 476.3 86.66 448H32C14.33 448 0 433.7 0 416V416zM192 416C192 398.3 177.7 384 160 384C142.3 384 128 398.3 128 416C128 433.7 142.3 448 160 448C177.7 448 192 433.7 192 416zM352 176C384.8 176 412.1 195.7 425.3 224H480C497.7 224 512 238.3 512 256C512 273.7 497.7 288 480 288H425.3C412.1 316.3 384.8 336 352 336C319.2 336 291 316.3 278.7 288H32C14.33 288 0 273.7 0 256C0 238.3 14.33 224 32 224H278.7C291 195.7 319.2 176 352 176zM384 256C384 238.3 369.7 224 352 224C334.3 224 320 238.3 320 256C320 273.7 334.3 288 352 288C369.7 288 384 273.7 384 256zM480 64C497.7 64 512 78.33 512 96C512 113.7 497.7 128 480 128H265.3C252.1 156.3 224.8 176 192 176C159.2 176 131 156.3 118.7 128H32C14.33 128 0 113.7 0 96C0 78.33 14.33 64 32 64H118.7C131 35.75 159.2 16 192 16C224.8 16 252.1 35.75 265.3 64H480zM160 96C160 113.7 174.3 128 192 128C209.7 128 224 113.7 224 96C224 78.33 209.7 64 192 64C174.3 64 160 78.33 160 96z"/></svg>
                <label id="lblCustom">Custom incomes</label>
                <label id="lblCustomDescription">Details of custom</label>
                <input id="inputCustomDate1" type="date">
                <label id="lblTo">to</label>
                <input id="inputCustomDate2" type="date">
                <label id="lblCustomIncome">LKR 0000.00</label>
            </div>
        </div>

        <!--driver form-->
        <form id="driverForm_container">
            <label id="lblAddNewDriver">Add new driver</label>
            <label id="lblDriverDetails">Input driver details</label>

            <input id="inputDriverId" type="text" name="driverId" placeholder="  D001">
            <i id="iId" class="fa-solid fa-user-shield"></i>
            <label id="lblDriverId">Driver id</label>

            <input id="inputDriverName" type="text" name="driverName" placeholder="  First & last name">
            <i id="iName" class="fa-solid fa-user"></i>
            <label id="lblDriverName">Driver name</label>

            <input id="inputDriverAge" type="text" name="driverAge" placeholder="  00">
            <i id="iAge" class="fa-solid fa-user-clock"></i>
            <label id="lblDriverAge">Driver age</label>

            <input id="inputDriverNumber" type="text" name="driverContactNumber" placeholder="  +94000000000">
            <i id="iNumber" class="fa-solid fa-user-gear"></i>
            <label id="lblDriverNumber">Driver contact no</label>

            <input id="inputDriverEmailAddress" type="text" name="driverEmailAddress" placeholder="  Driver@gmail.com">
            <i id="iEmailAddress" class="fa-solid fa-user-tag"></i>
            <label id="lblDriverEmailAddress">Driver Email</label>

            <button id="btnSaveDriver" type="button">Save driver</button>

            <i id="btnUpdateDriver" class="fa-regular fa-pen-to-square"></i>
            <i id="btnDeleteDriver" class="fa-regular fa-trash-can"></i>
            <i id="btnSearchDriver" class="fa-solid fa-magnifying-glass"></i>
        </form>

        <!--car form-->
        <form id="carRegistration_container">
            <label id="lblAddNewCar">Add new car</label>
            <label id="lblCarDetails">Input car details</label>

                    <input id="inputCarId" type="text" name="carId" placeholder="  C001">
                    <i id="iCarId" class="fa-solid fa-car"></i>
                    <label id="lblCarId">id</label>

                    <input id="inputCarAvailability" type="text" name="carAvailability" placeholder="  In Stock">
                    <i id="iCarAvailability" class="fa-solid fa-cubes-stacked"></i>
                    <label id="lblCarAvailability">Availability</label>

                    <input id="inputCarRegistrationNumber" type="text" name="registrationNumber" placeholder="  AB 0000">
                    <i id="iCarRegistrationNumber" class="fa-regular fa-credit-card"></i>
                    <label id="lblCarRegistrationNumber">Registration number</label>

                    <input id="inputCarType" type="text" name="carType" placeholder="  Mini / Luxury">
                    <i id="iCarType" class="fa-solid fa-car-side"></i>
                    <label id="lblCarType">Type</label>

                    <input id="inputCarColor" type="text" name="carColor" placeholder="  White">
                    <i id="iCarColor" class="fa-solid fa-droplet"></i>
                    <label id="lblCarColor">Color</label>

                    <input id="inputCarMileage" type="text" name="carMileage" placeholder="  2700km">
                    <i id="iCarMileage" class="fa-solid fa-chart-simple"></i>
                    <label id="lblCarMileage">Mileage</label>

                    <input id="inputCarTransmission" type="text" name="carTransmissionType" placeholder="  Auto / Manual">
                    <i id="iCarTransmission" class="fa-solid fa-charging-station"></i>
                    <label id="lblCarTransmission">Transmission</label>

                    <input id="inputCarFuelType" type="text" name="carFuelType" placeholder="  Petrol / Diesel">
                    <i id="iCarFuelType" class="fa-solid fa-gas-pump"></i>
                    <label id="lblCarFuelType">Fuel Type</label>

                    <input id="inputCarNumberOfPassengers" name="carNumberOfPassengers" type="text" placeholder="  0">
                    <i id="iCarNumberOfPassengers" class="fa-solid fa-users"></i>
                    <label id="lblNumberOfPassengers">Passengers</label>

                    <input id="inputCarDailyRate" type="text" name="carDailyRate" placeholder="  LKR 00000.00">
                    <i id="iCarDailyRate" class="fa-solid fa-chart-line"></i>
                    <label id="lblCarDailyRate">Daily rate</label>

                    <input id="inputCarMonthlyRate" type="text" name="carMonthlyRate" placeholder="  LKR 00000.00">
                    <i id="iCarMonthlyRate" class="fa-solid fa-money-bill-trend-up"></i>
                    <label id="lblCarMonthlyRate">Monthly rate</label>

                    <input id="inputCarPriceForExtraKM" type="text" name="carPriceForExtraKM" placeholder="  LKR 00000.00">
                    <i id="iCarPriceForExtraKM" class="fa-solid fa-hand-holding-dollar"></i>
                    <label id="lblCarPriceForExtraKM">Ex km price</label>

                    <input id="inputCarBrand" type="text" name="carBrand" placeholder="  BMW">
                    <i id="iCarBrand" class="fa-solid fa-camera"></i>
                    <label id="lblCarBrand">Brand</label>

                    <input id="inputCarDamagePrice" type="text" name="carDamagePrice" placeholder="  LKR 00000.00">
                    <i id="iCarDamagePrice" class="fa-solid fa-car-burst"></i>
                    <label id="lblCarDamagePrice">Damage price</label>

                    <button id="btnSaveCar" type="button">Save car</button>
                    <i id="btnUpdateCar" class="fa-regular fa-pen-to-square"></i>
                    <i id="btnSearchCar" class="fa-solid fa-magnifying-glass"></i>
                    <i id="btnDeleteCar" class="fa-regular fa-trash-can"></i>
        </form>

    </section>

    <!--add car img container-->
    <section id="carForm_container">
        <div class="wrapper">
            <div class="image">
                <img src="" alt="">
            </div>

            <div class="content">
                <div class="icon"><i class="fa-solid fa-cloud-arrow-up"></i></div>
                <div class="text">No file chosen, yet!</div>
            </div>

            <div id="cancel-btn"><i class="fa-solid fa-xmark"></i></div>
            <div class="file-name">File name here</i></div>
        </div>

        <input id="default-btn" type="file" hidden>
        <button onclick="defaultBtnActive()" id="custom-btn">Choose a file</button>
    </section>

    <!--add admin container-->
    <form id="adminForm_container">
        <label id="lblAddNewAdmin">Add new admin</label>
        <label id="lblAdminDetails">Input admin details</label>

        <input id="inputAdminId" type="text" name="adminId" placeholder="B001">

        <input id="inputAdminName" type="text" name="adminUserName" placeholder="  A001">
        <i id="iAdminName" class="fa-solid fa-user"></i>
        <label id="lblAdminName">Admin name</label>

        <input id="inputAdminPassword" type="text" name="adminPassword" placeholder="  ****">
        <i id="iAdminPassword" class="fa-solid fa-lock"></i>
        <label id="lblAdminPassword">Password</label>

        <label id="lblAddAdmin">Add admin</label>

        <i id="iAdminUpdate" class="fa-regular fa-pen-to-square"></i>
        <i id="iAdminDelete" class="fa-regular fa-trash-can"></i>
        <i id="iAdminSearch" class="fa-solid fa-magnifying-glass"></i>
    </form>

    <!--tables-->
    <!--car table container-->
    <section id="carTable_container">
        <label id="lblCarDetail">Car details</label>
        <label id="lblCarDetailsDescription">Manage your cars and car details here.</label>

        <hr id="lineOne">

        <!--car table-->
        <table class="content-table">
            <thead>
            <tr>
                <th>Id</th>
                <th>Brand</th>
                <th>Availability</th>
                <th>Reg no</th>
                <th>Type</th>
                <th>Color</th>
                <th>Mileage</th>
                <th>Transmission</th>
                <th>Fuel</th>
                <th>Seat</th>
                <th>Daily rate</th>
                <th>Monthly rate</th>
                <th>Ex price</th>
                <th>Damage price</th>
            </tr>
            </thead>
            <tbody id="tblCarJson">
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <!--<tr class="active-row">
             </tr>-->
            </tbody>
        </table>

        <i id="btnGetAllCar" class="fa-solid fa-reply-all"></i>
    </section>

    <!--driver table container-->
    <section id="driverTable_container">
        <label id="lblDriverDetail">Driver details</label>
        <label id="lblDriverDetailsDescription">Manage your drivers and driver details here.</label>

        <hr id="lineTwo">

        <!--driver table-->
        <table class="content-table">
            <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Age</th>
                <th>Contact number</th>
                <th>Email address</th>
            </tr>
            </thead>
            <tbody id="tblDriverJson">
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <!--<tr class="active-row">
             </tr>-->
            </tbody>
        </table>

        <i id="btnGetAllDriver" class="fa-solid fa-reply-all"></i>

    </section>

    <!--user table container-->
    <section id="userTable_container">
        <label id="lblUserDetail">User details</label>
        <label id="lblUserDetailsDescription">Manage your members and member details here.</label>

        <hr id="lineFour">

        <!--driver table-->
        <table class="content-table">
            <thead>
            <tr>
                <th>Id</th>
                <th>Nic</th>
                <th>Name</th>
                <th>Address</th>
                <th>Email address</th>
                <th>Contact Number</th>
            </tr>
            </thead>
            <tbody id="tblUserJson">
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <!--<tr class="active-row">
             </tr>-->
            </tbody>
        </table>

        <i id="btnGetAllUser" class="fa-solid fa-reply-all"></i>
        <i id="btnDeleteUser" class="fa-regular fa-trash-can"></i>

    </section>

    <!--admin details table container-->
    <section id="adminTable_container">
        <label id="lblAdmin">Admin details</label>
        <label id="lblAdminDescription">Manage admin and admin details here.</label>

        <hr id="lineFive">

        <!--booking details table-->
        <table class="content-table">
            <thead>
            <tr>
                <th>Admin id</th>
                <th>Admin name</th>
                <th>Password</th>
            </tr>
            </thead>
            <tbody id="tblAdminJson">
            <tr>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <!--<tr class="active-row">
             </tr>-->
            </tbody>
        </table>

        <i id="btnGetAllAdmins" class="fa-solid fa-reply-all"></i>

    </section>

    <!--booking details table container-->
    <section id="bookingTable_container">
        <label id="lblBookingDetail">Booking details</label>
        <label id="lblBookingDetailsDescription">Manage booking details and booking details here.</label>

        <hr id="lineThree">

        <!--booking details table-->
        <table class="content-table">
            <thead>
            <tr>
                <th>Booking id</th>
                <th>User id</th>
                <th>Car id</th>
                <th>Payment id</th>
                <th>Driver status</th>
                <th>Pick up</th>
                <th>Drop off</th>
                <th>Pick up date</th>
                <th>Drop off date</th>
                <th>Pick up time</th>
                <th>Drop off time</th>
                <th>Drop off date</th>
                <th>Current date</th>
                <th>Current time</th>
            </tr>
            </thead>
            <tbody id="tblBookingJson">
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <!--<tr class="active-row">
             </tr>-->
            </tbody>
        </table>

        <i id="btnGetAllBooking" class="fa-solid fa-reply-all"></i>

    </section>

    <script src="assets/jQuery/jquery-3.6.0.min.js"></script>
    <script>

        /*car img form*/
        const wrapper = document.querySelector(".wrapper");
        const fileName = document.querySelector(".file-name");
        const cancelBtn = document.querySelector("#cancel-btn");
        const defaultBtn = document.querySelector("#default-btn");
        const customBtn = document.querySelector("#custom-btn");
        const img =  document.querySelector("img");
        let regExp = /[0-9a-zA-Z\^\&\'@\{\}\[\]\,\$\=\!\-\#\(\)\.\%\+\~\_ ]+$/;
        function defaultBtnActive() {
            defaultBtn.click();
        }
        defaultBtn.addEventListener("change", function () {
            const file = this.files[0];
            if (file){
                const reader = new FileReader();
                reader.onload = function () {
                    const result = reader.result;
                    img.src = result;
                    wrapper.classList.add("active");
                }
                cancelBtn.addEventListener("click", function () {
                    img.src = "";
                    wrapper.classList.remove("active");
                })
                reader.readAsDataURL(file);
            }
            if (this.value){
                let valueStore = this.value.match(regExp);
                fileName.textContent = valueStore;
            }
        })


        $("#iHome").click(function () {
            $("#iDriver, #iCar, #iSettings, #iUser, #iAdmin").css("opacity","20%");
            $("#iHome").css("opacity","90%");
        });

        $("#iDriver").click(function () {
            $("#iHome, #iCar, #iSettings, #iUser, #iAdmin").css("opacity","20%");
            $("#iDriver").css("opacity","90%");
        });

        $("#iCar").click(function () {
            $("#iHome, #iDriver, #iSettings, #iUser, #iAdmin").css("opacity","20%");
            $("#iCar").css("opacity","90%");
        });

        $("#iUser").click(function () {
            $("#iHome, #iDriver, #iCar, #iSettings, #iAdmin").css("opacity","20%");
            $("#iUser").css("opacity","90%");
        });

        $("#iAdmin").click(function () {
            $("#iHome, #iDriver, #iCar, #iUser, #iSettings").css("opacity","20%");
            $("#iAdmin").css("opacity","90%");
        });

        $("#iSettings").click(function () {
            $("#iHome, #iDriver, #iCar, #iUser, #iAdmin").css("opacity","20%");
            $("#iSettings").css("opacity","90%");
        });

        /*display block & none*/
        $("#iHome").click(function () {
            $("#carRegistration_container, #driverForm_container, #custom-btn").css("display","block");
            $("#carTable_container, #driverTable_container, #bookingTable_container, #userTable_container, #adminTable_container").css("display","none");
        });

        $("#iCar").click(function () {
            $("#carTable_container").css("display","block");
            $("#carRegistration_container, #driverForm_container, #custom-btn, #driverTable_container, #bookingTable_container, #userTable_container, #adminTable_container").css("display","none");
        });

        $("#iDriver").click(function () {
            $("#driverTable_container").css("display","block");
            $("#carRegistration_container, #driverForm_container, #custom-btn, #carTable_container, #bookingTable_container, #userTable_container, #adminTable_container").css("display","none");
        });

        $("#iUser").click(function () {
            $("#userTable_container").css("display","block");
            $("#carRegistration_container, #driverForm_container, #custom-btn, #carTable_container, #driverTable_container, #adminTable_container, #bookingTable_container").css("display","none");
        });

        $("#iAdmin").click(function () {
            $("#adminTable_container").css("display","block");
            $("#carRegistration_container, #driverForm_container, #custom-btn, #carTable_container, #driverTable_container, #userTable_container, #bookingTable_container").css("display","none");
        });

        $("#iSettings").click(function () {
            $("#bookingTable_container").css("display","block");
            $("#carRegistration_container, #driverForm_container, #custom-btn, #carTable_container, #driverTable_container, #userTable_container, #adminTable_container").css("display","none");
        });

        //---------------------------------------------------------------

        /*car table*/
        var baseUrl = "http://localhost:8080/ecr/api/v1/car";

        // events
        // search car event
        $("#inputCarId").on("keypress",function (e) {
            if (e.key=="Enter"){
                searchCar();
            }
        })

        // get all car event
        $("#btnGetAllCar").click(function () {
            loadAllCar();
        });

        // save car event
        $("#btnSaveCar").click(function () {
            saveCar();
        })

        // delete car event
        $("#btnDeleteCar").click(function () {
            deleteCar();
        })

        // update car event
        $("#btnUpdateCar").click(function () {
            updateCar();
        })

        // bind click events to the table rows
        function bindClickEvents() {
            $("#tblCarJson>tr").click(function () {
                let carId = $(this).children().eq(0).text();
                let carBrand = $(this).children().eq(1).text();
                let carAvailability = $(this).children().eq(2).text();
                let registrationNumber = $(this).children().eq(3).text();
                let carType = $(this).children().eq(4).text();
                let carColor = $(this).children().eq(5).text();
                let carMileage = $(this).children().eq(6).text();
                let carTransmissionType = $(this).children().eq(7).text();
                let carFuelType = $(this).children().eq(8).text();
                let carNumberOfPassengers = $(this).children().eq(9).text();
                let carDailyRate = $(this).children().eq(10).text();
                let carMonthlyRate = $(this).children().eq(11).text();
                let carPriceForExtraKM = $(this).children().eq(12).text();
                let carDamagePrice = $(this).children().eq(13).text();

                $("#inputCarId").val(carId);
                $("#inputCarBrand").val(carBrand);
                $("#inputCarAvailability").val(carAvailability);
                $("#inputCarRegistrationNumber").val(registrationNumber);
                $("#inputCarType").val(carType);
                $("#inputCarColor").val(carColor);
                $("#inputCarMileage").val(carMileage);
                $("#inputCarTransmission").val(carTransmissionType);
                $("#inputCarFuelType").val(carFuelType);
                $("#inputCarNumberOfPassengers").val(carNumberOfPassengers);
                $("#inputCarDailyRate").val(carDailyRate);
                $("#inputCarMonthlyRate").val(carMonthlyRate);
                $("#inputCarPriceForExtraKM").val(carPriceForExtraKM);
                $("#inputCarDamagePrice").val(carDamagePrice);
            });
        }

        // methods
        loadAllCar();

        // save car
        function saveCar() {
            var data = $("#carRegistration_container").serialize();
            $.ajax({
                url: baseUrl,
                method: "POST",
                data: data,
                success: function (res) {
                    if (res.code == 200) {
                        alert("Successfully Car Registered");
                        loadAllCar();
                        clearForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // load all car
        function loadAllCar() {
            $("#tblCarJson").empty();
            $.ajax({
                url: baseUrl,
                method: "GET",
                //dataType: "json",
                success: function (resp) {
                    for (const car of resp.data) {
                        let row = `<tr><td>${car.carId}</td><td>${car.carBrand}</td><td>${car.carAvailability}</td><td>${car.registrationNumber}</td><td>${car.carType}</td><td>${car.carColor}</td><td>${car.carMileage}</td><td>${car.carTransmissionType}</td><td>${car.carFuelType}</td><td>${car.carNumberOfPassengers}</td><td>${car.carDailyRate}</td><td>${car.carMonthlyRate}</td><td>${car.carPriceForExtraKM}</td><td>${car.carDamagePrice}</td></tr>`
                        $("#tblCarJson").append(row);
                    }
                    bindClickEvents();
                    clearForm();
                },
                error:function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // update driver
        function updateCar() {

            var carOb = {
                carId: $("#inputCarId").val(),
                carBrand: $("#inputCarBrand").val(),
                carAvailability: $("#inputCarAvailability").val(),
                registrationNumber: $("#inputCarRegistrationNumber").val(),
                carType: $("#inputCarType").val(),
                carColor: $("#inputCarColor").val(),
                carMileage: $("#inputCarMileage").val(),
                carTransmissionType: $("#inputCarTransmission").val(),
                carFuelType: $("#inputCarFuelType").val(),
                carNumberOfPassengers: $("#inputCarNumberOfPassengers").val(),
                carDailyRate: $("#inputCarDailyRate").val(),
                carMonthlyRate: $("#inputCarMonthlyRate").val(),
                carPriceForExtraKM: $("#inputCarPriceForExtraKM").val(),
                carDamagePrice: $("#inputCarDamagePrice").val()
            }

            $.ajax({
                url: baseUrl,
                method: "PUT",
                contentType: "application/json",
                data: JSON.stringify(carOb),
                success: function (res) {
                    if (res.code == 200) {
                        alert("Successfully Update");
                        loadAllCar();
                        clearForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            })
        }

        // delete car
        function deleteCar() {
            // get the car id
            let carId = $("#inputCarId").val();
            // initiate the request
            $.ajax({
                url: baseUrl+"?id=" +carId,
                method: "DELETE",
                success: function (res) {
                    if (res.code == 200) {
                        alert("Car Successfully Deleted");
                        loadAllCar();
                        clearForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            })
        }

        // search car
        function searchCar() {
            var carId = $("#inputCarId").val();

            $.ajax({
                url: baseUrl+"/"+carId,
                method:"GET",
                success:function (res) {
                    if (res.code=200){
                        var car = res.data;
                        $("#inputCarId").val(car.carId);
                        $("#inputCarBrand").val(car.carBrand);
                        $("#inputCarAvailability").val(car.carAvailability);
                        $("#inputCarRegistrationNumber").val(car.registrationNumber);
                        $("#inputCarType").val(car.carType);
                        $("#inputCarColor").val(car.carColor);
                        $("#inputCarMileage").val(car.carMileage);
                        $("#inputCarTransmission").val(car.carTransmissionType);
                        $("#inputCarFuelType").val(car.carFuelType);
                        $("#inputCarNumberOfPassengers").val(car.carNumberOfPassengers);
                        $("#inputCarDailyRate").val(car.carDailyRate);
                        $("#inputCarMonthlyRate").val(car.carMonthlyRate);
                        $("#inputCarPriceForExtraKM").val(car.carPriceForExtraKM);
                        $("#inputCarDamagePrice").val(car.carDamagePrice);
                    }else {
                        clearForm();
                    }
                },
                error:function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // clear car input field
        function clearForm() {
            $("#inputCarId").val("");
            $("#inputCarBrand").val("");
            $("#inputCarAvailability").val("");
            $("#inputCarRegistrationNumber").val("");
            $("#inputCarType").val("");
            $("#inputCarColor").val("");
            $("#inputCarMileage").val("");
            $("#inputCarTransmission").val("");
            $("#inputCarFuelType").val("");
            $("#inputCarNumberOfPassengers").val("");
            $("#inputCarDailyRate").val("");
            $("#inputCarMonthlyRate").val("");
            $("#inputCarPriceForExtraKM").val("");
            $("#inputCarDamagePrice").val("");
        }

        //---------------------------------------------------------------

        /*driver table*/
        var baseDriverUrl = "http://localhost:8080/ecr/api/v1/driver";

        // events
        // search driver event
        $("#inputDriverId").on("keypress",function (e) {
            if (e.key=="Enter"){
                searchDriver();
            }
        })

        // get all driver event
        $("#btnGetAllDriver").click(function () {
            loadAllDriver();
        });

        // save driver event
        $("#btnSaveDriver").click(function () {
            saveDriver();
        })

        // delete driver event
        $("#btnDeleteDriver").click(function () {
            deleteDriver();
        })

        // update driver event
        $("#btnUpdateDriver").click(function () {
            updateDriver();
        })

        // bind click events to the table rows
        function bindDriverClickEvents() {
            $("#tblDriverJson>tr").click(function () {
                let driverId = $(this).children().eq(0).text();
                let driverName = $(this).children().eq(1).text();
                let driverAge = $(this).children().eq(2).text();
                let driverContactNumber = $(this).children().eq(3).text();
                let driverEmailAddress = $(this).children().eq(4).text();

                $("#inputDriverId").val(driverId);
                $("#inputDriverName").val(driverName);
                $("#inputDriverAge").val(driverAge);
                $("#inputDriverNumber").val(driverContactNumber);
                $("#inputDriverEmailAddress").val(driverEmailAddress);
            });
        }

        // methods
        loadAllDriver();

        // save driver
        function saveDriver() {
            var data = $("#driverForm_container").serialize();
            $.ajax({
                url: baseDriverUrl,
                method: "POST",
                data: data,
                success: function (res) {
                    if (res.code == 200) {
                        alert("Successfully Driver Registered");
                        loadAllDriver();
                        clearDriverForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // load all driver
        function loadAllDriver() {
            $("#tblDriverJson").empty();
            $.ajax({
                url: baseDriverUrl,
                method: "GET",
                //dataType: "json",
                success: function (resp) {
                    for (const driver of resp.data) {
                        let row = `<tr><td>${driver.driverId}</td><td>${driver.driverName}</td><td>${driver.driverAge}</td><td>${driver.driverContactNumber}</td><td>${driver.driverEmailAddress}</td></tr>`
                        $("#tblDriverJson").append(row);
                    }
                    bindDriverClickEvents();
                    clearDriverForm();
                },
                error:function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // update driver
        function updateDriver() {

            var driverOb = {
                driverId: $("#inputDriverId").val(),
                driverName: $("#inputDriverName").val(),
                driverAge: $("#inputDriverAge").val(),
                driverContactNumber: $("#inputDriverNumber").val(),
                driverEmailAddress: $("#inputDriverEmailAddress").val()
            }

            $.ajax({
                url: baseDriverUrl,
                method: "PUT",
                contentType: "application/json",
                data: JSON.stringify(driverOb),
                success: function (res) {
                    if (res.code == 200) {
                        alert("Successfully Update");
                        loadAllDriver();
                        clearDriverForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            })
        }

        // delete driver
        function deleteDriver() {
            // get the driver id
            let driverId = $("#inputDriverId").val();
            // initiate the request
            $.ajax({
                url: baseDriverUrl+"?id=" +driverId,
                method: "DELETE",
                success: function (res) {
                    if (res.code == 200) {
                        alert("Driver Successfully Deleted");
                        loadAllDriver();
                        clearDriverForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            })
        }

        // search driver
        function searchDriver() {
            var driverId = $("#inputDriverId").val();

            $.ajax({
                url: baseDriverUrl+"/"+driverId,
                method:"GET",
                success:function (res) {
                    if (res.code=200){
                        var car = res.data;
                        $("#inputDriverId").val(car.driverId);
                        $("#inputDriverName").val(car.driverName);
                        $("#inputDriverAge").val(car.driverAge);
                        $("#inputDriverNumber").val(car.driverContactNumber);
                        $("#inputDriverEmailAddress").val(car.driverEmailAddress);

                    }else {
                        clearDriverForm();
                    }
                },
                error:function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // clear driver input field
        function clearDriverForm() {
            $("#inputDriverId").val("");
            $("#inputDriverName").val("");
            $("#inputDriverAge").val("");
            $("#inputDriverNumber").val("");
            $("#inputDriverEmailAddress").val("");
        }

        //---------------------------------------------------------------

        /*user table*/
        var baseUserUrl = "http://localhost:8080/ecr/api/v1/user";

        // events
        // search user event
        $("#inputUserId").on("keypress",function (e) {
            if (e.key=="Enter"){
                searchUser();
            }
        })

        // get all user event
        $("#btnGetAllUser").click(function () {
            loadAllUser();
        });

        // save user event
        $("#btnSaveUser").click(function () {
            saveUser();
        })

        // delete user event
        $("#btnDeleteUser").click(function () {
            deleteUser();
        })

        // update user event
        $("#btnUpdateUser").click(function () {
            updateUser();
        })

        // bind click events to the table rows
        function bindUserClickEvents() {
            $("#tblUserJson>tr").click(function () {
                let userId = $(this).children().eq(0).text();
                let userNic = $(this).children().eq(1).text();
                let userName = $(this).children().eq(2).text();
                let userAddress = $(this).children().eq(3).text();
                let userEmailAddress = $(this).children().eq(4).text();
                let userContactNumber = $(this).children().eq(5).text();

                $("#inputUserId").val(userId);
                $("#inputUserNic").val(userNic);
                $("#inputUserName").val(userName);
                $("#inputUserAddress").val(userAddress);
                $("#inputUserEmailAddress").val(userEmailAddress);
                $("#inputUserContactNumber").val(userContactNumber);
            });
        }

        // methods
        loadAllUser();

        // save user
        function saveUser() {
            var data = $("#userForm_container").serialize();
            $.ajax({
                url: baseUserUrl,
                method: "POST",
                data: data,
                success: function (res) {
                    if (res.code == 200) {
                        alert("Successfully User Registered");
                        loadAllUser();
                        clearUserForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // load all user
        function loadAllUser() {
            $("#tblUserJson").empty();
            $.ajax({
                url: baseUserUrl,
                method: "GET",
                //dataType: "json",
                success: function (resp) {
                    for (const user of resp.data) {
                        let row = `<tr><td>${user.userId}</td><td>${user.userNic}</td><td>${user.userName}</td><td>${user.userAddress}</td><td>${user.userEmailAddress}</td><td>${user.userContactNumber}</td></tr>`
                        $("#tblUserJson").append(row);
                    }
                    bindUserClickEvents();
                    clearUserForm();
                },
                error:function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // update user
        function updateUser() {

            var userOb = {
                userId: $("#inputUserId").val(),
                userNic: $("#inputUserNic").val(),
                userName: $("#inputUserName").val(),
                userAddress: $("#inputUserAddress").val(),
                userEmailAddress: $("#inputUserEmailAddress").val(),
                userContactNumber: $("#inputUserContactNumber").val()
            }

            $.ajax({
                url: baseUserUrl,
                method: "PUT",
                contentType: "application/json",
                data: JSON.stringify(userOb),
                success: function (res) {
                    if (res.code == 200) {
                        alert("Successfully Update");
                        loadAllUser();
                        clearUserForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            })
        }

        // delete user
        function deleteUser() {
            // get the user id
            let userId = $("#inputUserId").val();
            // initiate the request
            $.ajax({
                url: baseUserUrl+"?id=" +userId,
                method: "DELETE",
                success: function (res) {
                    if (res.code == 200) {
                        alert("User Successfully Deleted");
                        loadAllUser();
                        clearUserForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            })
        }

        // search user
        function searchUser() {
            var userId = $("#inputUserId").val();

            $.ajax({
                url: baseUserUrl+"/"+userId,
                method:"GET",
                success:function (res) {
                    if (res.code=200){
                        var user = res.data;
                        $("#inputUserId").val(user.userId);
                        $("#inputUserNic").val(user.userNic);
                        $("#inputUserName").val(user.userName);
                        $("#inputUserAddress").val(user.userAddress);
                        $("#inputUserEmailAddress").val(user.userEmailAddress);
                        $("#inputUserContactNumber").val(user.userContactNumber);

                    }else {
                        clearUserForm();
                    }
                },
                error:function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // clear user input field
        function clearUserForm() {
            $("#inputUserId").val("");
            $("#inputUserNic").val("");
            $("#inputUserName").val("");
            $("#inputUserAddress").val("");
            $("#inputUserEmailAddress").val("");
            $("#inputUserContactNumber").val("");
        }

        //---------------------------------------------------------------

        /*admin table*/
        var baseAdminUrl = "http://localhost:8080/ecr/api/v1/admin";

        // events
        // search admin event
        $("#inputAdminId").on("keypress",function (e) {
            if (e.key=="Enter"){
                searchAdmin();
            }
        })

        // get all admin event
        $("#btnGetAllAdmins").click(function () {
            loadAllAdmin();
        });

        // save admin event
        $("#lblAddAdmin").click(function () {
            saveAdmin();
        })

        // delete admin event
        $("#iAdminDelete").click(function () {
            deleteAdmin();
        })

        // update admin event
        $("#iAdminUpdate").click(function () {
            updateAdmin();
        })

        // bind click events to the admin table rows
        function bindAdminClickEvents() {
            $("#tblAdminJson>tr").click(function () {
                let adminId = $(this).children().eq(0).text();
                let adminName = $(this).children().eq(1).text();
                let adminPassword = $(this).children().eq(2).text();

                $("#inputAdminId").val(adminId);
                $("#inputAdminName").val(adminName);
                $("#inputAdminPassword").val(adminPassword);
            });
        }

        // methods
        loadAllAdmin();

        // save admin
        function saveAdmin() {
            var data = $("#adminForm_container").serialize();
            $.ajax({
                url: baseAdminUrl,
                method: "POST",
                data: data,
                success: function (res) {
                    if (res.code == 200) {
                        alert("Successfully Admin Registered");
                        loadAllAdmin();
                        clearAdminForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // load all admin
        function loadAllAdmin() {
            $("#tblAdminJson").empty();
            $.ajax({
                url: baseAdminUrl,
                method: "GET",
                //dataType: "json",
                success: function (resp) {
                    for (const admin of resp.data) {
                        let row = `<tr><td>${admin.adminId}</td><td>${admin.adminUserName}</td><td>${admin.adminPassword}</td></tr>`
                        $("#tblAdminJson").append(row);
                    }
                    bindAdminClickEvents();
                    clearAdminForm();
                },
                error:function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // update admin
        function updateAdmin() {

            var adminOb = {
                adminId: $("#inputAdminId").val(),
                adminUserName: $("#inputAdminName").val(),
                adminPassword: $("#inputAdminPassword").val()
              }

            $.ajax({
                url: baseAdminUrl,
                method: "PUT",
                contentType: "application/json",
                data: JSON.stringify(adminOb),
                success: function (res) {
                    if (res.code == 200) {
                        alert("Successfully Update");
                        loadAllAdmin();
                        clearAdminForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            })
        }

        // delete admin
        function deleteAdmin() {
            // get the admin id
            let adminId = $("#inputAdminId").val();
            // initiate the request
            $.ajax({
                url: baseAdminUrl+"?id=" +adminId,
                method: "DELETE",
                success: function (res) {
                    if (res.code == 200) {
                        alert("Admin Successfully Deleted");
                        loadAllAdmin();
                        clearAdminForm();
                    }
                },
                error: function (ob) {
                    alert(ob.responseJSON.message);
                }
            })
        }

        // search admin
        function searchAdmin() {
            var adminId = $("#inputAdminId").val();

            $.ajax({
                url: baseAdminUrl+"/"+adminId,
                method:"GET",
                success:function (res) {
                    if (res.code=200){
                        var admin = res.data;
                        $("#inputAdminId").val(admin.adminId);
                        $("#inputAdminName").val(admin.adminUserName);
                        $("#inputAdminPassword").val(admin.adminPassword);
                    }else {
                        clearAdminForm();
                    }
                },
                error:function (ob) {
                    alert(ob.responseJSON.message);
                }
            });
        }

        // clear admin input field
        function clearAdminForm() {
            $("#inputAdminId").val("");
            $("#inputAdminName").val("");
            $("#inputAdminPassword").val("");
        }

    </script>

</body>
</html>